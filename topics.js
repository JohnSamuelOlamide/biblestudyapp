var topics = [
  {
    genre: "Me",
    subtopics: [
      {
        title: "The Human Spirit",
        description: "The Human Spirit",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "The Believer's Identity: Imago Dei ",
        description: "The Believer's Identity: Imago Dei ",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "The Believer's Authority",
        description: "The Believer's Authority",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "Relative to others, who am I?",
        description: "Relative to others, who am I?",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "Selflessness",
        description: "Selflessness",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "Pride, Humility, Achievements & Abilities",
        description: "Pride, Humility & Abilities",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "Self esteem, Confidence & Humility",
        description: "Self esteem, Confidence & Humility",
        resources: [{}],
        week: "",
        weekID: "",
      },
    ],
  },
  {
    genre: "Leading",
    subtopics: [
      {
        title: "God's leading",
        description: "God's leading",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "The Nature and Attributes of God: The Providence of God",
        description: "The Nature and Attributes of God: The Providence of God",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title:
          "The Nature and Attributes of God: The Sovereignty of God and Human Free Will",
        description:
          "The Nature and Attributes of God: The Sovereignty of God and Human Free Will",
        resources: [{}],
        week: "",
        weekID: "",
      },
    ],
  },
  {
    genre: "My duties and works",
    subtopics: [
      {
        title: "The Paradox of Grace and Works",
        description: "The Paradox of Grace and Works",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "Diligence, Discipline & Excellence",
        description: "Diligence, Discipline & Excellence",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title:
          "Holiness, Righteousness, Sanctification & Purity: The New Testament Concept(A higher Calling)",
        description:
          "Holiness, Righteousness, Sanctification & Purity: The New Testament Concept(A higher Calling)",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "The Fruits of the Spirit",
        description: "The Fruits of the Spirit",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "Fasting and Spiritual Disciplines",
        description: "Fasting and Spiritual Disciplines",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "Stewardship: Time, Talents, and Resources",
        description: "Stewardship: Time, Talents, and Resources",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "Temptation and Overcoming Sin",
        description: "Temptation and Overcoming Sin",
        resources: [{}],
        week: "",
        weekID: "",
      },
    ],
  },
  {
    genre: "Things to know about Jesus",
    subtopics: [
      {
        title: "The Old Testament Prophecies about Jesus",
        description: "The Old Testament Prophecies about Jesus",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title:
          "The Doctrine of Atonement: What Did Jesus Achieve on the Cross?",
        description:
          "The Doctrine of Atonement: What Did Jesus Achieve on the Cross?",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "The Resurrection of Jesus",
        description: "The Resurrection of Jesus",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "The Coming of Christ and Eschatology (study of end times)",
        description:
          "The Coming of Christ and Eschatology (study of end times)",
        resources: [{}],
        week: "",
        weekID: "",
      },
    ],
  },
  {
    genre: "The Supernatural Life",
    subtopics: [
      {
        title: "The Human Spirit",
        description: "The Human Spirit",
        resources: [{}],
        week: "",
        weekID: "",
      },

      {
        title: "The Role of the Holy Spirit in the Believer’s Life",
        description: "The Role of the Holy Spirit in the Believer’s Life",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "Spiritual Gifts and their Use in the Body of Christ",
        description: "Spiritual Gifts and their Use in the Body of Christ",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "The Nature and Role of Angels and Heavenly Hosts",
        description: "The Nature and Role of Angels and Heavenly Hosts",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "The Enemy: Satan, Demons, and Temptation",
        description: "The Enemy: Satan, Demons, and Temptation",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "The Paradox of the Christian Life",
        description: "The Paradox of the Christian Life",
        resources: [{}],
        week: "",
        weekID: "",
      },
    ],
  },
  {
    genre: "What happens to the believer",
    subtopics: [
      {
        title: "Redemption, Salvation & Baptism (Soteriology)",
        description: "Redemption and Salvation (Soteriology)",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "Justification and Imputation",
        description: "Justification and Imputation",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title:
          "The Doctrine of Election and Predestination: Understanding God’s Choosing",
        description:
          "The Doctrine of Election and Predestination: Understanding God’s Choosing",
        resources: [{}],
        week: "",
        weekID: "",
      },
    ],
  },
  {
    genre: "Values & Virtues",
    subtopics: [
      {
        title: "Love: Agape, Eros, Phileo, and Storge",
        description: "Love: Agape, Eros, Phileo, and Storge",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "Wisdom and Knowledge",
        description: "Wisdom and Knowledge",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "Unity & Oneness",
        description: "Unity & Oneness",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "Sowing, Kindness, Giving & Generosity",
        description: "Sowing, Kindness, Giving & Generosity",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "Savings & Investments",
        description: "Savings & Investments",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "Showing Justice, Mercy & Fairness",
        description: "Showing Justice, Mercy & Fairness",
        resources: [{}],
        week: "",
        weekID: "",
      },
    ],
  },
  {
    genre: "My Connection with God",
    subtopics: [
      {
        title: "Creation and the Creator",
        description: "Creation and the Creator",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "Reflecting God",
        description: "Reflecting God",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "The Priesthood of All Believers",
        description: "The Priesthood of All Believers",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "The Spiritual Discipline of Silence and Solitude",
        description: "The Spiritual Discipline of Silence and Solitude",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "Fasting and Spiritual Disciplines",
        description: "Fasting and Spiritual Disciplines",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "Prayer and Intercession",
        description: "Prayer and Intercession",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "The Fear of the Lord: A Key to Wisdom and Spiritual Growth",
        description:
          "The Fear of the Lord: A Key to Wisdom and Spiritual Growth",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "The Believer's Identity: Imago Dei",
        description: "The Believer's Identity: Imago Dei",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title:
          "The Nature and Attributes of God: The Sovereignty of God and Human Free Will",
        description:
          "The Nature and Attributes of God: The Sovereignty of God and Human Free Will",
        resources: [{}],
        week: "",
        weekID: "",
      },
    ],
  },
  {
    genre: "Doctries and Theology",
    subtopics: [
      {
        title: "The Authority of Scripture and its Infallibility",
        description: "The Authority of Scripture and its Infallibility",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "The Church (Ecclesiology)",
        description: "The Church (Ecclesiology)",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "The Doctrine of the Trinity: One God in Three Persons",
        description: "The Doctrine of the Trinity: One God in Three Persons",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title:
          "The Biblical Understanding of Rest: Sabbath and Spiritual Renewal",
        description:
          "The Biblical Understanding of Rest: Sabbath and Spiritual Renewal",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "The Problem of Evil: Theodicy and God’s Goodness",
        description: "The Problem of Evil: Theodicy and God’s Goodness",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "Covenant Theology in Scripture: Old vs. New",
        description: "Covenant Theology in Scripture: Old vs. New",
        resources: [{}],
        week: "",
        weekID: "",
      },
    ],
  },
  {
    genre: "Trials & Endurance",
    subtopics: [
      {
        title: "Faith and Trust in God",
        description: "Faith and Trust in God",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title:
          "The Theology of Suffering: Why Do Bad Things Happen to Good People?",
        description:
          "The Theology of Suffering: Why Do Bad Things Happen to Good People?",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "Hope and Patience in Waiting",
        description: "Hope and Patience in Waiting",
        resources: [{}],
        week: "",
        weekID: "",
      },
    ],
  },

  {
    genre: "Evangelism & Missions",
    subtopics: [
      {
        title: "The Great Commission",
        description: "The Great Commission",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "The Role of the Holy Spirit in Evangelism",
        description: "The Role of the Holy Spirit in Evangelism",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "Spiritual Gifts and their Use in Evangelism",
        description: "Spiritual Gifts and their Use in Evangelism",
        resources: [{}],
        week: "",
        weekID: "",
      },
    ],
  },

  {
    genre: "Spiritual Disciplines",
    subtopics: [
      {
        title: "The Spiritual Discipline of Silence and Solitude",
        description: "The Spiritual Discipline of Silence and Solitude",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "The Power of Words: Speech, Tongue, and Communication",
        description: "The Power of Words: Speech, Tongue, and Communication",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "Thanksgiving",
        description: "Thanksgiving",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "Prayer and Intercession",
        description: "Prayer and Intercession",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "Worship",
        description: "Worship",
        resources: [{}],
        week: "",
        weekID: "",
      },
    ],
  },
  {
    genre: "God's nature",
    subtopics: [
      {
        title: "The Nature and Attributes of God: The Immutability of God",
        description:
          "The Nature and Attributes of God: The Immutability of God",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "The Nature and Attributes of God: The Wisdom of God",
        description: "The Nature and Attributes of God: The Wisdom of God",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "The Nature and Attributes of God: The Wrath of God",
        description: "The Nature and Attributes of God: The Wrath of God",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "The Nature and Attributes of God: The Omniprescence of God",
        description:
          "The Nature and Attributes of God: The Omniprescence of God",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "The Nature and Attributes of God: The Omniscience of God",
        description: "The Nature and Attributes of God: The Omniscience of God",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "The Nature and Attributes of God: The Omnipotence of God",
        description: "The Nature and Attributes of God: The Omnipotence of God",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "The Nature and Attributes of God: The Holiness of God",
        description: "The Nature and Attributes of God: The Holiness of God",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "The Nature and Attributes of God: The Love of God",
        description: "The Nature and Attributes of God: The Love of God",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title: "The Nature and Attributes of God: The Providence of God",
        description: "The Nature and Attributes of God: The Providence of God",
        resources: [{}],
        week: "",
        weekID: "",
      },
      {
        title:
          "The Nature and Attributes of God: The Sovereignty of God and Human Free Will",
        description:
          "The Nature and Attributes of God: The Sovereignty of God and Human Free Will",
        resources: [{}],
        week: "",
        weekID: "",
      },
    ],
  },
];

let weekNumber = 1; // Initialize the week counter
topics.forEach((topic) => {
  topic.subtopics.forEach((subtopic) => {
    subtopic.week = `Week ${weekNumber}`; // Assign the week label
    subtopic.weekID = `week${weekNumber}`; // Assign the week label
    weekNumber++; // Increment the week number for each subtopic
  });
});

// Wrap the topics array in an object with a 'topics' property
const data = { topics: topics };

// Get the Mustache template and render it
const template = document.getElementById("template").innerHTML;
const rendered = Mustache.render(template, data);

// console.log(JSON.stringify(topics, null, 2));

// Insert the rendered HTML into the container
document.querySelector(".schedule-container").innerHTML = rendered;

// This function will save the current state of checkboxes to localStorage
function saveCheckboxState() {
  const checkboxes = document.querySelectorAll('input[type="checkbox"]'); // Select all checkboxes
  const checkboxStates = {}; // Object to hold checkbox states

  checkboxes.forEach((checkbox) => {
    const id = checkbox.closest("label").getAttribute("id"); // Use the closest label id as a unique key
    checkboxStates[id] = checkbox.checked; // Store the checkbox state
  });

  localStorage.setItem("checkboxStates", JSON.stringify(checkboxStates)); // Save the state to localStorage
}

// This function will load the checkbox states from localStorage and apply them
function loadCheckboxState() {
  const savedStates = JSON.parse(localStorage.getItem("checkboxStates")); // Retrieve stored states from localStorage

  if (savedStates) {
    const checkboxes = document.querySelectorAll('input[type="checkbox"]');
    checkboxes.forEach((checkbox) => {
      const id = checkbox.closest("label").getAttribute("id"); // Use the closest label id as the key
      if (savedStates[id] !== undefined) {
        checkbox.checked = savedStates[id]; // Apply the saved state to the checkbox
      }
    });
  }
}

// Load checkbox states on page load
window.addEventListener("load", loadCheckboxState);

// Save checkbox state whenever a checkbox is changed
document.querySelectorAll('input[type="checkbox"]').forEach((checkbox) => {
  checkbox.addEventListener("change", saveCheckboxState);
});
